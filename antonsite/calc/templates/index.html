{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href=" {% static 'css/index.css' %} ">
    </head>
    <body>
        <div class="search">
            <h1>Satisfactory Calculator</h1>
        </div>
        <div class="cols">
            <div class="col1">
            <div>
                <img class="logo" src="/media/static/images/fiscit_logo.png" alt="">
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Ingots">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Minerals">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Liquids">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Standard Parts">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Industrial Parts">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Electronics">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Communications">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Containers">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Fuels">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Consumed">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Ficsmas">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Ammos">
                </form>
                </label>
            </div>
            <div>
                <label>
                <form action="">
                    <input type="submit" name="category" value="Nuclear">
                </form>
                </label>
            </div>
            
            <div>
                <label>
                <form action="">
                    <input id="#special"type="submit" name="category" value="Special">
                </form>
            </label>
            </div>
            
            </div>
            <div class="col">
                <div class="flex">
                    <button class="input-submit" hx-get="{% url 'submit_modal' %}" hx-target="#dialog">test
                    </button>
                    {% for i in object_list %}
                    <div class="recipes">
                        <button class="input-submit" hx-get="{% url 'submit_modal' %}" hx-target="#dialog">
                            <div><image src="{{i.item_img.url}}" alt="{{i.item_name}}"></div>
                            <div class="center">{{i.item_name_readable}}</div>
                        </button>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div id="modal" class="modal fade">
            <div id="dialog" class="modal-dialog" hx-target="this"></div>
        </div>
          <script>
            import * as htmx from 'htmx.org';

            import * as bootstrap from "bootstrap";

            (window as any).htmx = htmx;


            const modal = new bootstrap.Modal(document.getElementById("modal"))

            htmx.on("htmx:afterSwap", (e) => {
            // Response targeting #dialog => show the modal
            // @ts-ignore
            if (e.detail.target.id == "dialog") {
                modal.show()
            }
            })

            htmx.on("htmx:beforeSwap", (e) => {
                // Empty response targeting #dialog => hide the modal
                // @ts-ignore
                if (e.detail.target.id == "dialog" && !e.detail.xhr.response) {
                modal.hide()
                location.reload();  
                // @ts-ignore
                e.detail.shouldSwap = false
            }
            })
          </script>  
    </body>
</html>